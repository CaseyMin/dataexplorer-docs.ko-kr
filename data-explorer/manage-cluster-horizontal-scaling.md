---
title: Azure 데이터 탐색기의 수요에 맞게 클러스터 수평 확장(확장) 관리
description: 이 문서에서는 변화하는 수요에 따라 Azure Data Explorer 클러스터에서 확장하고 확장하는 단계에 대해 설명합니다.
author: orspod
ms.author: orspodek
ms.reviewer: gabil
ms.service: data-explorer
ms.topic: conceptual
ms.date: 12/09/2019
ms.openlocfilehash: ff7420619cffc2287ab8ff6332df605d56329549
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/15/2020
ms.locfileid: "81502284"
---
# <a name="manage-cluster-horizontal-scaling-scale-out-in-azure-data-explorer-to-accommodate-changing-demand"></a>Azure 데이터 탐색기에서 클러스터 수평 확장(확장)을 관리하여 변화하는 수요를 수용할 수 있습니다.

클러스터 크기를 적절하게 조정하는 것은 Azure 데이터 탐색기의 성능에 중요합니다. 정적 클러스터 크기는 사용량 미달 또는 사용량 초과로 이어질 수 있으며, 둘 다 이상적인 경우는 아닙니다. 클러스터에 대한 수요를 절대적인 정확도로 예측할 수 없기 때문에 수요 변화에 따라 클러스터를 *확장하고* 용량 및 CPU 리소스를 추가하는 것이 좋습니다. 

Azure 데이터 탐색기 클러스터를 확장하기 위한 두 가지 워크플로가 있습니다. 
* 수평 크기 조정이라고도 합니다.
* [수직 크기 조정은](manage-cluster-vertical-scaling.md)위쪽 및 축소라고도 합니다.
이 문서에서는 수평 크기 조정 워크플로를 설명합니다.

## <a name="configure-horizontal-scaling"></a>수평 크기 조정 구성

수평 크기 조정을 사용하면 미리 정의된 규칙 및 일정에 따라 인스턴스 수를 자동으로 확장할 수 있습니다. 클러스터의 자동 크기 조정 설정을 지정하려면 다음을 수행합니다.

1. Azure 포털에서 Azure 데이터 탐색기 클러스터 리소스로 이동합니다. **설정에서** **배율 조정을 선택합니다.** 

2. **배율 조정** 창에서 **수동 배율,** **최적화된 자동 크기 조정**또는 사용자 지정 자동 크기 **조정**: 원하는 자동 크기 조정 방법을 선택합니다.

### <a name="manual-scale"></a>수동 크기 조정

수동 배율은 클러스터 를 만드는 동안 기본 설정입니다. 클러스터에는 자동으로 변경되지 않는 정적 용량이 있습니다. **인스턴스 수** 막대를 사용하여 정적 용량을 선택합니다. 클러스터의 크기 조정은 다른 변경을 수행할 때까지 해당 설정에 유지됩니다.

   ![수동 스케일 방법](media/manage-cluster-horizontal-scaling/manual-scale-method.png)

### <a name="optimized-autoscale-preview"></a>최적화된 자동 크기 조정(미리 보기)

최적화된 자동 크기 조정은 권장되는 자동 크기 조정 방법입니다. 이 방법은 클러스터 성능과 비용을 최적화합니다. 클러스터가 사용률이 저조한 상태에 접근하면 클러스터의 크기가 조정됩니다. 이 작업을 수행하면 비용이 절감되지만 성능 수준은 유지됩니다. 클러스터가 과다 사용률 상태에 도달하면 최적의 성능을 유지하기 위해 확장됩니다. 최적화된 자동 크기 조정을 구성하려면 다음을 수행합니다.

1. **최적화된 자동 크기 조정을**선택합니다. 

1. 최소 인스턴스 수와 최대 인스턴스 수를 선택합니다. 클러스터 자동 크기 조정 범위는 부하에 따라 두 숫자 사이의 범위입니다.

1. **저장**을 선택합니다.

   ![최적화된 자동 스케일 방법](media/manage-cluster-horizontal-scaling/optimized-autoscale-method.png)

최적화된 자동 크기 조정이 작동을 시작합니다. 이제 해당 작업이 클러스터의 Azure 활동 로그에 표시됩니다.

#### <a name="logic-of-optimized-autoscale"></a>최적화된 오토스케일의 로직 

**확장**

클러스터가 과다 사용률 상태에 가까워지면 최적의 성능을 유지하기 위해 확장합니다. 다음과 같은 경우 확장이 발생합니다.
* 클러스터 인스턴스 수는 사용자가 정의한 최대 인스턴스 수보다 낮습니다.
* 캐시 사용률은 1시간 이상 높습니다.
* CPU는 한 시간 이상 높다.
* 섭취 사용률은 1시간 이상 높습니다.

> [!NOTE]
> 확장 논리는 현재 섭취 사용률 메트릭을 고려하지 않습니다. 이 메트릭이 사용 사례에 중요한 경우 [사용자 지정 자동 크기 조정을](#custom-autoscale)사용합니다.

**규모 감축**

클러스터가 사용률이 낮은 상태에 가까워지면 비용을 절감하고 성능을 유지하도록 확장합니다. 클러스터에서 확장해도 안전한지 확인하기 위해 여러 메트릭이 사용됩니다. 다음 규칙은 스케일 인이 수행되기 전에 6 시간 동안 시간당 평가됩니다.
* 인스턴스 수가 2개 이상이며 정의된 최소 인스턴스 수보다 초과합니다.
* 리소스의 오버로드가 발생하지 않도록 하려면 확장이 수행되기 전에 다음 메트릭을 확인해야 합니다. 
    * 캐시 사용률이 높지 않습니다.
    * CPU가 평균 이하 
    * 섭취 사용률이 평균 보다 낮습니다. 
    * 스트리밍 인제스트 사용률(스트리밍 인제스트가 사용되는 경우)은 높지 않습니다.
    * 살아 있는 이벤트는 정의된 최소 값 이상으로 유지되고, 적절히 처리되며, 정시에 처리됩니다.
    * 쿼리 제한 없음 
    * 실패한 쿼리 수가 정의된 최소 쿼리 수보다 낮습니다.

> [!NOTE]
> 논리의 확장은 현재 최적화된 스케일을 구현하기 전에 7일 간의 평가가 필요합니다. 이 평가는 24시간마다 한 번씩 이루어집니다. 빠른 변경이 필요한 경우 [수동 축척을](#manual-scale)사용합니다.

### <a name="custom-autoscale"></a>사용자 지정 자동 크기 조정

사용자 지정 자동 크기 조정을 사용하면 지정한 메트릭에 따라 클러스터를 동적으로 확장할 수 있습니다. 다음 그래픽은 사용자 지정 자동 크기 조정을 구성하는 흐름 및 단계를 보여 주며 있습니다. 자세한 내용은 그래픽을 따릅니다.

1. 자동 **크기 조정 이름** 상자에 *확장: 캐시 사용률과*같은 이름을 입력합니다. 

   ![크기 조정 규칙](media/manage-cluster-horizontal-scaling/custom-autoscale-method.png)

2. **축척 모드의**경우 **메트릭에 따라 배율을**선택합니다. 이 모드는 동적 크기 조정을 제공합니다. 특정 인스턴스 **수에 배율을**선택할 수도 있습니다.

3. **+ 규칙 추가를**선택합니다.

4. 오른쪽의 **배율 조정 규칙** 섹션에서 각 설정에 대한 값을 입력합니다.

    **기준**

    | 설정 | 설명 및 값 |
    | --- | --- |
    | **시간 집계** | **평균** 같은 집계 기준을 선택합니다. |
    | **메트릭 이름** | **캐시 사용률**과 같이 크기 조정 작업의 기준이 될 메트릭을 선택합니다. |
    | **시간 조직 통계** | **평균**, **최솟값**, **최댓값**, **합계** 중에서 선택합니다. |
    | **연산자** | **보다 크거나 같음**과 같은 적절한 옵션을 선택합니다. |
    | **임계값** | 적절한 값을 선택합니다. 예를 들어 캐시 사용률의 경우 80%가 좋은 출발점입니다. |
    | **소요시간(분)** | 시스템이 메트릭을 계산하는 경우에 다시 확인하는 적절한 기간을 선택합니다. 처음에는 기본값 10분으로 시작합니다. |
    |  |  |

    **작업**

    | 설정 | 설명 및 값 |
    | --- | --- |
    | **연산** | 규모를 감축하거나 규모를 확장하는 적절한 옵션을 선택합니다. |
    | **인스턴스 수** | 메트릭 조건을 충족할 경우 추가하거나 제거할 노드 또는 인스턴스 수를 선택합니다. |
    | **식히기(분)** | 크기 조정 작업 간의 적절한 시간 간격을 선택합니다. 기본값 5분으로 시작합니다. |
    |  |  |

5. **추가**를 선택합니다.

6. 인스턴스 **제한** 섹션에서 왼쪽의 각 설정에 대한 값을 입력합니다.

    | 설정 | 설명 및 값 |
    | --- | --- |
    | **최소** | 사용률에 관계없이 클러스터가 인스턴스 수를 이보다 낮게 줄이지 않습니다. |
    | **최대** | 사용률에 관계없이 클러스터가 인스턴스 수를 이보다 높게 늘리지 않습니다. |
    | **기본** | 인스턴스의 기본 수입니다. 이 설정은 리소스 메트릭을 읽는 데 문제가 있는 경우에 사용됩니다. |
    |  |  |

7. **저장**을 선택합니다.

이제 Azure 데이터 탐색기 클러스터에 대해 수평 크기 조정을 구성했습니다. 수직 배율 조정에 대한 다른 규칙을 추가합니다. 클러스터 크기 조정 문제에 대한 지원이 필요한 경우 Azure 포털에서 [지원 요청을 엽니다.](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview)

## <a name="next-steps"></a>다음 단계

* [메트릭을 사용하여 Azure 데이터 탐색기 성능, 상태 및 사용량 모니터링](using-metrics.md)
* [클러스터의](manage-cluster-vertical-scaling.md) 적절한 크기 조정을 위해 클러스터 수직 크기 조정을 관리합니다.

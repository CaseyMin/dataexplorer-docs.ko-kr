---
title: 데이터 수집 - Azure Data Explorer | Microsoft Docs
description: 이 문서에서는 Azure Data Explorer의 데이터 수집에 대해 설명합니다.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: f0fb68395ec5ed647e1f28cc1c93d46083d405c6
ms.sourcegitcommit: bb8c61dea193fbbf9ffe37dd200fa36e428aff8c
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/13/2020
ms.locfileid: "83373438"
---
# <a name="data-ingestion"></a>데이터 수집

데이터를 테이블에 추가하고 쿼리에 사용할 수 있게 하는 프로세스입니다.
사전에 테이블의 존재 여부에 따라 프로세스에는 [데이터베이스 관리자, 데이터베이스 수집자, 데이터베이스 사용자 또는 테이블 관리자 권한](../access-control/role-based-authorization.md)이 필요합니다.

데이터 수집 프로세스를 구성하는 몇 가지 단계는 다음과 같습니다.

1. 데이터 원본에서 데이터를 검색합니다.
1. 데이터를 구문 분석 및 유효성 검사를 합니다.
1. 데이터의 스키마를 대상 Kusto 테이블의 스키마와 일치시키거나, 대상 테이블이 아직 없는 경우 이를 만듭니다.
1. 데이터를 열로 구성합니다.
1. 데이터를 인덱싱합니다.
1. 데이터를 인코딩 및 압축합니다.
1. 결과적인 Kusto 스토리지 아티팩트를 스토리지에 유지합니다.
1. 모든 관련 업데이트 정책을 실행합니다(있는 경우).
1. 데이터 수집을 "커밋"하여 쿼리에 사용할 수 있습니다.

> [!NOTE]
> 위의 단계 중 일부는 특정 시나리오에 따라 건너뛸 수 있습니다.
> 예를 들어 스트리밍 수집 엔드포인트를 통해 수집된 데이터는 4, 5, 6 및 9단계를 건너뜁니다. 데이터가 "정리"되므로 이러한 작업은 백그라운드에서 수행됩니다.
> 또 다른 예로, 데이터 원본이 동일한 클러스터에 대한 Kusto 쿼리의 결과인 경우 데이터를 구문 분석하고 유효성을 검사할 필요가 없습니다.

> [!WARNING]
> Kusto의 테이블에 수집되는 데이터에는 테이블의 유효 **보존 정책**이 적용됩니다.
> 테이블에 명시적으로 설정되지 않은 경우 유효 보존 정책은 데이터베이스의 보존 정책에서 파생됩니다. 따라서 데이터를 Kusto에 수집하는 경우 데이터베이스의 보존 정책이 요구 사항에 적합한지 확인합니다. 그렇지 않으면 테이블 수준에서 명시적으로 재정의합니다. 이렇게 하지 않으면 데이터베이스의 보존 정책으로 인해 데이터가 "자동"으로 삭제될 수 있습니다. 자세한 내용은 [보존 정책](https://kusto.azurewebsites.net/docs/concepts/retentionpolicy.html)을 참조하세요.

데이터 수집 속성은 [데이터 수집 속성](../../../ingestion-properties.md)을 참조하세요.
데이터 수집에 대해 지원되는 형식 목록은 [데이터 형식](../../../ingestion-supported-formats.md)을 참조하세요.



## <a name="ingestion-methods"></a>수집 메서드

데이터를 수집할 수 있는 여러 메서드가 있으며, 각 메서드에는 고유한 특성이 있습니다.

1. **인라인 수집(밀어넣기)** : 제어 명령([.inest inline](./ingest-inline.md))을 엔진으로 보내며, 수집할 데이터가 명령 텍스트 자체의 일부가 됩니다.
   이 메서드는 주로 임시 테스트 용도로 사용되며, 프로덕션 용도로는 사용할 수 없습니다.
1. **쿼리에서 수집**: 제어 명령([.set, .append, .set-or-append 또는 .set-or-replace](./ingest-from-query.md))을 엔진으로 보내며, 데이터가 쿼리 또는 명령의 결과로 간접적으로 지정됩니다.
   이 메서드는 원시 데이터 테이블에서 보고 테이블을 생성하거나 추가 분석을 위해 작은 임시 테이블을 만드는 데 유용합니다.
1. **스토리지에서 수집(끌어오기)** : 엔진에서 액세스할 수 있는 일부 외부 스토리지(예: Azure Blob Storage)에 저장된 데이터와 함께 제어 명령([.ingest into](./ingest-from-storage.md))이 엔진으로 보내집니다.
   이 메서드를 사용하면 데이터를 효율적으로 대량 수집할 수 있습니다. 그러나 동시 수집(또는 데이터 수집에서 모든 클러스터 리소스를 사용하는 위험)에서 클러스터가 과도하게 작동하지 않도록 수집을 수행하는 클라이언트에 약간의 부담을 가합니다. 이로 인해 쿼리 성능이 저하될 수 있습니다.
1. **대기 중인 큐 수집**: 데이터가 외부 스토리지(예: Azure Blob Storage)에 업로드됩니다. 알림이 큐(예: Azure Queue 또는 Event Hub)로 보내집니다.
   이는 가용성이 매우 높고 클라이언트에서 용량 관리 자체를 수행할 필요가 없으며 대량 추가를 효율적으로 처리하므로 프로덕션에 사용되는 기본 메서드입니다. 이를 "네이티브 수집"이라고도 합니다.


|방법             |대기 시간                 |프로덕션|대량|가용성|동시성|
|-------------------|------------------------|----------|----|------------|-------------|
|인라인 수집   |초 + 수집 시간   |예        |예  |Kusto 엔진|동기  |
|쿼리에서 수집  |쿼리 시간 + 수집 시간|예       |예 |Kusto 엔진|동기  |
|스토리지에서 수집|초 + 수집 시간   |예       |예 |Kusto 엔진|모두         |
|대기 중인 큐 수집   |분                 |예       |예 |스토리지     |비동기 |

## <a name="validation-policy-during-ingestion"></a>수집 중의 유효성 검사 정책

스토리지에서 수집하는 경우 구문 분석의 일환으로 원본 데이터의 유효성을 검사합니다.
유효성 검사 정책은 구문 분석 오류에 대응하는 방법을 나타냅니다. 다음 두 가지 속성으로 구성됩니다.

* `ValidationOptions`: 여기서 `0`은 유효성 검사가 수행되지 않아야 함을 의미하고, `1`은 모든 레코드의 필드 수가 동일한지의 유효성을 검사하며(CSV 파일 및 이와 비슷한 파일에 유용함), `2`는 큰따옴표가 없는 필드를 무시함을 나타냅니다.

* `ValidationImplications`: `0`은 유효성 검사 실패가 전체 수집에 실패해야 함을 나타내고, `1`은 유효성 검사 실패를 무시해야 함을 나타냅니다.
---
title: 샌드박스 - Azure 데이터 탐색기 | 마이크로 소프트 문서
description: 이 문서에서는 Azure 데이터 탐색기의 샌드박스에 대해 설명합니다.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: faa7a8225aecd5992e3064fd10cfcc0e559c5127
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/15/2020
ms.locfileid: "81522970"
---
# <a name="sandboxes"></a>샌드박스

Kusto의 데이터 엔진 서비스는 보안 격리가 필요한 특정 흐름을 실행하기 위해 샌드박스를 실행할 수 있습니다.
이러한 흐름의 예로는 [Python 플러그인](../query/pythonplugin.md) 또는 [R 플러그인을](../query/rplugin.md)사용하여 실행되는 사용자 정의 스크립트가 있습니다.

이러한 샌드박스를 실행하기 위해 Kusto는 Microsoft의 [드로브리지](https://www.microsoft.com/research/project/drawbridge/) 프로젝트의 진화를 사용합니다. 이 솔루션은 다른 Microsoft 서비스에서 다중 테넌트 환경에서 사용자 정의 개체를 실행하는 데 사용됩니다.

샌드박스에서 실행되는 흐름은 격리될 뿐만 아니라 로컬(데이터에 가깝기)이기 때문에 원격 호출에 대해 추가된 대기 시간이 없습니다.

## <a name="prerequisites"></a>사전 요구 사항

* 데이터 엔진에 [디스크 암호화를](https://docs.microsoft.com/azure/data-explorer/security#data-encryption) 사용하도록 설정되어 **있지 않아야** 합니다.
  * 두 기능을 나란히 실행하는 데 대한 지원은 향후 예상됩니다.
* 샌드박스를 실행하는 데 필요한 패키지(이미지)가 각 데이터 엔진의 노드에 배포되며 실행하려면 전용 SSD 공간이 필요합니다.
  * 예상 크기는 20GB이며, 예를 들어 D14_v2 VM의 SSD 용량은 약 2.5%, vML16_v1 SSD 용량은 0.7%입니다.
  * 이는 클러스터의 데이터 용량에 영향을 미치므로 클러스터 [비용에](https://azure.microsoft.com/pricing/details/data-explorer) 영향을 줄 수 있습니다.

## <a name="runtime"></a>런타임

* 샌드박스 쿼리 연산자는 실행에 하나 이상의 샌드박스를 사용할 수 있습니다.
  * 이러한 실행은 단일 실행에만 사용되며 여러 실행에서 공유되지 않으며 실행이 완료되면 삭제됩니다.
* 각 노드는 들어오는 요청을 실행하기 위해 미리 정의된 양의 샌드박스를 유지 관리합니다.
  * 샌드박스를 사용하면 새 샌드박스가 자동으로 할당되어 교체됩니다.
* 쿼리 연산자에게 서비스를 제공하는 데 사용할 수 있는 미리 할당된 샌드박스가 없는 경우 제한됩니다.
  새 샌드박스가 할당될 때까지 오류(SKU 및 데이터 노드의 사용 가능한 리소스에 따라 샌드박스당 최대 10-15초가 걸릴 수 있음)를 [참조하십시오.](#errors)

## <a name="limitations"></a>제한 사항

이러한 제한 사항 중 일부는 각 종류의 [샌드박스에](../management/sandboxpolicy.md)대해 클러스터 수준 샌드박스 정책을 사용하여 제어할 수 있습니다.

* **노드당 샌드박스 수:** 노드당 샌드박스 수는 제한되어 있습니다.
  * 사용 가능한 샌드박스가 없는 상태가 발생하는 요청은 제한됩니다.
* **네트워크:** 샌드박스는 VM 또는 그 외부의 리소스와 상호 작용할 수 없습니다.
  * 샌드박스는 다른 샌드박스와 상호 작용할 수 없습니다.
* **CPU:** 샌드박스가 호스트 프로세서를 사용할 수 있는 CPU의 최대 속도는 기본적으로 `50%`제한됩니다(기본적으로).
  * 이 제한에 도달하면 샌드박스의 CPU 사용량이 제한되지만 실행은 계속됩니다.
* **메모리:** 샌드박스에서 호스트의 RAM을 사용할 수 있는 최대 RAM의 양은 `20GB`기본적으로 제한됩니다(기본적으로).
  * 이 제한에 도달하면 샌드박스(및 쿼리 실행 오류)가 종료됩니다.
* **디스크:** 샌드박스에는 호스트의 파일 시스템에 액세스할 수 없는 고유한 디렉터리가 연결되어 있습니다.
  * 이 폴더는 샌드박스의 종류(예: 사용자 지정할 수 없는 파이썬 또는 R 패키지)와 일치하는 이미지/패키지에 대한 액세스를 제공합니다.
* **자식 프로세스:** 샌드박스는 자식 프로세스를 생성하지 못하도록 차단됩니다.

> [!NOTE]
> 샌드박스의 리소스 사용률은 요청의 일부로 처리되는 데이터의 크기뿐만 아니라 샌드박스에서 실행되는 논리및 이에 의해 사용되는 라이브러리의 구현에 따라 달라집니다.
> (예: 및 `python` `r` 플러그인의 경우, 후자는 사용자가 제공한 스크립트와 런타임에 사용하는 Python 또는 R 라이브러리를 의미합니다.)

## <a name="errors"></a>오류

|코드                      |메시지                                                                                        |잠재적인 이유                                                                                                    |
|--------------------------|-----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
|E_SB_QUERY_THROTTLED_ERROR|샌드박스 쿼리가 제한으로 인해 중단되었습니다. 일부 백오프 후 다시 시도 성공   |대상 노드에 사용 가능한 샌드박스가 없습니다. 몇 초 안에 새 샌드박스를 사용할 수 있게 됩니다.         |
|E_SB_QUERY_THROTTLED_ERROR|종류의 샌드박스 '{종류}'는 아직 초기화되지 않았습니다.                                       |샌드박스 정책이 최근에 변경되었습니다. 새 정책에 순종하는 새 샌드박스는 몇 초 안에 사용할 수 있게 됩니다.|
---
title: 샌드박스-Azure 데이터 탐색기 | Microsoft Docs
description: 이 문서에서는 Azure 데이터 탐색기의 샌드박스에 대해 설명 합니다.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 03/30/2020
ms.openlocfilehash: 5dec95e8d4a73bcff4e8ad037577c51a20fcc64c
ms.sourcegitcommit: 4f68d6dbfa6463dbb284de0aa17fc193d529ce3a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/04/2020
ms.locfileid: "82741966"
---
# <a name="sandboxes"></a>샌드박스

Kusto의 데이터 엔진 서비스는 보안 격리가 필요한 특정 흐름을 실행 하기 위해 샌드박스를 실행할 수 있습니다.
이러한 흐름의 예로는 [Python 플러그 인](../query/pythonplugin.md) 또는 [R 플러그 인](../query/rplugin.md)을 사용 하 여 실행 되는 사용자 정의 스크립트가 있습니다.

이러한 샌드박스를 실행 하는 경우 Kusto는 Microsoft의 [Drawbridge](https://www.microsoft.com/research/project/drawbridge/) 프로젝트의 진화를 사용 합니다. 이 솔루션은 다른 Microsoft 서비스에서 다중 테 넌 트 환경에서 사용자 정의 개체를 실행 하는 데 사용 됩니다.

샌드박스에서 실행 되는 흐름은 격리 되는 것이 아니라 로컬 (데이터에 근접) 이므로 원격 호출에 추가 대기 시간이 추가 되지 않았음을 의미 합니다.

## <a name="prerequisites"></a>사전 요구 사항

* 데이터 엔진에서 [디스크 암호화](https://docs.microsoft.com/azure/data-explorer/security#data-encryption) 를 사용 하도록 설정 **하지** 않아야 합니다.
  * 나중에 두 기능을 나란히 실행 하는 데 대 한 지원이 필요 합니다.
* 샌드박스를 실행 하는 데 필요한 패키지 (이미지)는 각 데이터 엔진의 노드에 배포 되며, 실행 하기 위해 전용 SSD 공간이 필요 합니다.
  * 예상 크기는 20GB입니다. 예를 들어, L16_v1 VM의 ssd 용량의 2.5 0.7 D14_v2%는 대략%입니다.
  * 이는 클러스터의 데이터 용량에 영향을 주므로 클러스터 [비용](https://azure.microsoft.com/pricing/details/data-explorer) 에 영향을 줄 수 있습니다.

## <a name="runtime"></a>런타임

* 샌드 박싱된 쿼리 연산자는 실행을 위해 하나 이상의 샌드박스를 활용할 수 있습니다.
  * 샌드박스는 단일 실행에만 사용 되 고, 여러 실행에서 공유 되지 않으며, 실행이 완료 되 면 삭제 됩니다.
  * 샌드박스에서 실행을 위해 샌드박스를 처음으로 사용 해야 하는 경우에는 샌드박스에서 런타임에 초기화가 지연 됩니다.
    * 즉, 노드에서 샌드박스를 사용 하는 플러그 인을 처음 실행 하면 짧은 준비 기간이 포함 됩니다.
  * 노드를 다시 시작 하는 경우 (예: 서비스 업그레이드의 일부로) 실행 되는 모든 샌드박스는 삭제 됩니다.
* 각 노드는 들어오는 요청을 실행할 준비가 된 사전 정의 된 샌드박스를 유지 관리 합니다.
  * 샌드박스를 사용 하면 새 샌드박스를 자동으로 할당 하 여 대체 합니다.
* 쿼리 연산자를 제공 하는 데 사용할 수 있는 미리 할당 된 샌드박스에서 없는 경우 제한 됩니다.
  (데이터 노드의 SKU 및 사용 가능한 리소스에 따라 새 샌드박스를 10-15 할당할 때까지 [오류](#errors)를 참조 하세요.)

## <a name="limitations"></a>제한 사항

이러한 제한 사항 중 일부는 각 유형의 샌드박스에 대해 클러스터 수준 [샌드박스 정책을](../management/sandboxpolicy.md)사용 하 여 제어할 수 있습니다.

* **노드당 샌드박스 수:** 노드당 샌드박스 수가 제한 됩니다.
  * 사용 가능한 샌드박스가 없는 상태를 발생 시키는 요청은 제한 됩니다.
* **네트워크:** 샌드박스는 VM 또는 외부의 리소스와 상호 작용할 수 없습니다.
  * 샌드박스는 다른 샌드박스에 상호 작용할 수 없습니다.
* **CPU:** 샌드박스에서 호스트 프로세서를 소비할 수 있는 최대 CPU 비율은 제한 됩니다 (기본적으로 `50%`).
  * 이 한도에 도달 하면 샌드박스의 CPU 사용량이 제한 되지만 실행은 계속 됩니다.
* **메모리:** 샌드박스에서 호스트의 RAM을 사용할 수 있는 최대 RAM 크기는 제한 됩니다 (기본적으로 `20GB`).
  * 이 제한에 도달 하면 샌드박스 종료 및 쿼리 실행 오류가 발생 합니다.
* **디스크:** 샌드박스에는 고유한 디렉터리가 연결 되어 있으며,이를 위해 호스트의 파일 시스템에 액세스할 수 없습니다.
  * 이 폴더는 샌드박스 종류 (예: 사용자 지정할 수 없는 Python 또는 R 패키지)와 일치 하는 이미지/패키지에 대 한 액세스를 제공 합니다.
* **자식 프로세스:** 샌드박스는 자식 프로세스를 생성 하지 못하도록 차단 됩니다.

> [!NOTE]
> Sandbox의 리소스 사용률은 요청 중에 처리 되는 데이터의 크기 뿐만 아니라 샌드박스에서 실행 되는 논리와이에서 사용 하는 라이브러리의 구현에 따라 달라 집니다.
> (예: `python` 및 `r` 플러그 인의 경우 후자는 사용자 제공 스크립트 및 런타임에 사용 하는 Python 또는 R 라이브러리를 의미 합니다.)

## <a name="errors"></a>오류

|코드                      |메시지                                                                                        |가능한 원인                                                                                                    |
|--------------------------|-----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
|E_SB_QUERY_THROTTLED_ERROR|제한으로 인해 샌드 박싱된 쿼리가 중단 되었습니다. 일부 백오프 성공 후 다시 시도 하 고 있습니다.   |대상 노드에 사용 가능한 샌드박스에서 없습니다. 몇 초 후에 새 샌드박스를 사용할 수 있게 됩니다.         |
|E_SB_QUERY_THROTTLED_ERROR|' {Kind} ' 종류의 샌드박스에서 아직 초기화 되지 않았습니다.                                       |샌드박스 정책이 최근에 변경 되었습니다. 새 샌드박스에 엑세스 새 정책을 몇 초 안에 사용할 수 있게 됩니다.|

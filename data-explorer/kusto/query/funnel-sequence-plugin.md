---
title: funnel_sequence 플러그인 - Azure 데이터 탐색기 | 마이크로 소프트 문서
description: 이 문서에서는 Azure 데이터 탐색기의 funnel_sequence 플러그인에 대해 설명합니다.
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 02/13/2020
ms.openlocfilehash: a0543d0083fd90d5ee3e6e94cf1ee203f6cbd50d
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/15/2020
ms.locfileid: "81514742"
---
# <a name="funnel_sequence-plugin"></a>funnel_sequence 플러그 인

일련의 상태를 취한 사용자의 고유한 수를 계산하고 순서를 이끈 이전/다음 상태의 분포를 계산합니다. 

```kusto
T | evaluate funnel_sequence(id, datetime_column, startofday(ago(30d)), startofday(now()), 10m, 1d, state_column, dynamic(['S1', 'S2', 'S3']))
```

**구문**

*T* `| evaluate` `,` *Start* `,` *End* `,` *IdColumn* `,` *TimelineColumn* *Step* *StateColumn* *Sequence* *MaxSequenceStepWindow*IdColumn 타임라인 시작 끝 MaxSequenceStepWindow, 단계 , 상태열, 시퀀스 `funnel_sequence(``)`

**인수**

* *T*: 입력 테이블 형식 식입니다.
* *IdColum*: 열 참조, 소스 식에 있어야 합니다.
* *TimelineColumn*: 타임라인을 나타내는 열 참조가 소스 식에 있어야 합니다.
* *시작*: 분석 시작 기간의 스칼라 상수 값
* *끝*: 해석 종료 기간의 스칼라 상수 값
* *MaxSequenceStepWindow*: 시퀀스의 2개의 순차적 단계 사이의 최대 허용 시간 범위의 스칼라 상수 값
* *단계*: 분석 단계 기간의 스칼라 상수 값(빈)
* *StateColumn*: 상태를 나타내는 열 참조는 소스 식에 있어야 합니다.
* *시퀀스*: 시퀀스 값이 있는 상수 `StateColumn`동적 배열(값이 위로 조회됩니다)

**반환**

분석된 시퀀스에 대한 sankey 다이어그램을 생성하는 데 유용한 3개의 출력 테이블을 반환합니다.

* 테이블 #1 - 이전 시퀀스-다음 dcount TimelineColumn: 분석된 시간 창 이전: 이전 상태(검색된 시퀀스에 대한 이벤트만 있는 사용자가 있었지만 이전에는 이벤트가 없는 경우 비어 있을 수 있음). 
    다음 상태: 다음 상태(검색된 시퀀스에 대한 이벤트만 있는 사용자가 있지만 그 다음에 발생한 이벤트는 없는 경우 비어 있을 수 있습니다). 
    dcount: [이전] --> <IdColumn> <Sequence> [다음]> 전환한 시간 창의 고유한 개수입니다. 
    샘플: 행의 시퀀스에 <IdColumn>해당하는 ids 배열(최대 128개의 ID가 반환됨)입니다. 

* 표 #2 - 이전 시퀀스 dcount TimelineColumn: 분석된 시간 창 이전: 이전 상태(검색된 시퀀스에 대한 이벤트만 있는 사용자가 있었지만 이전에는 이벤트가 없는 경우 비어 있을 수 있음). 
    dcount: [이전] --> <IdColumn> <Sequence> [다음]> 전환한 시간 창의 고유한 개수입니다. 
    샘플: 행의 시퀀스에 <IdColumn>해당하는 ids 배열(최대 128개의 ID가 반환됨)입니다. 

* 테이블 #3 - 시퀀스-다음 dcount TimelineColumn: 다음 상태: 다음 상태(검색된 시퀀스에 대한 이벤트만 있는 사용자가 있지만 그 다음에 는 이벤트가 없는 경우 비어 있을 수 있음). 
    dcount: [이전] --> <IdColumn> <Sequence> [다음]> 전환한 시간 창의 고유한 개수입니다. 
    샘플: 행의 시퀀스에 <IdColumn>해당하는 ids 배열(최대 128개의 ID가 반환됨)입니다. 


**예**

### <a name="exploring-storm-events"></a>폭풍 이벤트 탐색 

다음 쿼리는 StormEvents(2007년 날씨 통계) 표를 살펴보고 2007년에 발생한 모든 토네이도 이벤트가 발생하기 전/후에 발생하는 이벤트를 보여 주며 보여 주며, 이 쿼리는 다음과 같습니다.

```kusto
// Looking on StormEvents statistics: 
// Q1: What happens before Tornado event?
// Q2: What happens after Tornado event?
StormEvents
| evaluate funnel_sequence(EpisodeId, StartTime, datetime(2007-01-01), datetime(2008-01-01), 1d,365d, EventType, dynamic(['Tornado']))
```

결과에는 3개의 테이블이 포함됩니다.

* 표 #1: 시퀀스 전후에 발생한 모든 가능한 변형입니다. 예를 들어 두 번째 줄은 다음 시퀀스를 가진 87개의 다른 이벤트가 있음을 알려줍니다.`Hail` -> `Tornado` -> `Hail`


|StartTime|prev|다음|dcount|
|---|---|---|---|
|2007-01-01 00:00:00.0000000|||293|
|2007-01-01 00:00:00.0000000|우박|우박|87|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|뇌우를 동반한 바람|77|
|2007-01-01 00:00:00.0000000|우박|뇌우를 동반한 바람|28|
|2007-01-01 00:00:00.0000000|우박||28|
|2007-01-01 00:00:00.0000000||우박|27|
|2007-01-01 00:00:00.0000000||뇌우를 동반한 바람|25|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|우박|24|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람||24|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|갑작스러운 홍수|12|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|갑작스러운 홍수|8|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수||8|
|2007-01-01 00:00:00.0000000|깔때기 구름|뇌우를 동반한 바람|6|
|2007-01-01 00:00:00.0000000||깔때기 구름|6|
|2007-01-01 00:00:00.0000000||갑작스러운 홍수|6|
|2007-01-01 00:00:00.0000000|깔때기 구름|깔때기 구름|6|
|2007-01-01 00:00:00.0000000|우박|갑작스러운 홍수|4|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|뇌우를 동반한 바람|4|
|2007-01-01 00:00:00.0000000|우박|깔때기 구름|4|
|2007-01-01 00:00:00.0000000|깔때기 구름|우박|4|
|2007-01-01 00:00:00.0000000|깔때기 구름||4|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|깔때기 구름|3|
|2007-01-01 00:00:00.0000000|호우|뇌우를 동반한 바람|2|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|깔때기 구름|2|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|우박|2|
|2007-01-01 00:00:00.0000000|강한 바람|뇌우를 동반한 바람|1|
|2007-01-01 00:00:00.0000000|호우|갑작스러운 홍수|1|
|2007-01-01 00:00:00.0000000|호우|우박|1|
|2007-01-01 00:00:00.0000000|우박|홍수|1|
|2007-01-01 00:00:00.0000000|번개|우박|1|
|2007-01-01 00:00:00.0000000|호우|번개|1|
|2007-01-01 00:00:00.0000000|깔때기 구름|호우|1|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|홍수|1|
|2007-01-01 00:00:00.0000000|홍수|갑작스러운 홍수|1|
|2007-01-01 00:00:00.0000000||호우|1|
|2007-01-01 00:00:00.0000000|깔때기 구름|번개|1|
|2007-01-01 00:00:00.0000000|번개|뇌우를 동반한 바람|1|
|2007-01-01 00:00:00.0000000|홍수|뇌우를 동반한 바람|1|
|2007-01-01 00:00:00.0000000|우박|번개|1|
|2007-01-01 00:00:00.0000000||번개|1|
|2007-01-01 00:00:00.0000000|열대 성 폭풍|태풍 (태풍)|1|
|2007-01-01 00:00:00.0000000|해안 홍수||1|
|2007-01-01 00:00:00.0000000|리핑 전류||1|
|2007-01-01 00:00:00.0000000|폭설||1|
|2007-01-01 00:00:00.0000000|강한 바람||1|

* 표 #2: 이전 이벤트별로 그룹화된 모든 별개의 이벤트를 표시합니다. 예를 들어, 두 번째 줄은 직전에 발생한 `Hail` 총 150개의 이벤트가 있음을 보여 주며`Tornado`

|StartTime|prev|카운트 (것)수|
|---------|-----|------|
|2007-01-01 00:00:00.0000000||331|
|2007-01-01 00:00:00.0000000|우박|150|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|135|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|28|
|2007-01-01 00:00:00.0000000|깔때기 구름|22|
|2007-01-01 00:00:00.0000000|호우|5|
|2007-01-01 00:00:00.0000000|홍수|2|
|2007-01-01 00:00:00.0000000|번개|2|
|2007-01-01 00:00:00.0000000|강한 바람|2|
|2007-01-01 00:00:00.0000000|폭설|1|
|2007-01-01 00:00:00.0000000|리핑 전류|1|
|2007-01-01 00:00:00.0000000|해안 홍수|1|
|2007-01-01 00:00:00.0000000|열대 성 폭풍|1|

* 표 #3: 다음 이벤트별로 그룹화된 모든 별개의 이벤트를 표시합니다. 예를 들어, 두 번째 줄은 `Hail` 그 후 발생한 총 143개의 이벤트가 있음을 보여 주며`Tornado`

|StartTime|다음|카운트 (것)수|
|---------|-----|------|
|2007-01-01 00:00:00.0000000||332|
|2007-01-01 00:00:00.0000000|우박|145|
|2007-01-01 00:00:00.0000000|뇌우를 동반한 바람|143|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|32|
|2007-01-01 00:00:00.0000000|깔때기 구름|21|
|2007-01-01 00:00:00.0000000|번개|4|
|2007-01-01 00:00:00.0000000|호우|2|
|2007-01-01 00:00:00.0000000|홍수|2|
|2007-01-01 00:00:00.0000000|태풍 (태풍)|1|

이제 다음 시퀀스가 어떻게 계속되는지 알아보겠습니다.  
`Hail` -> `Tornado` -> `Thunderstorm Wind`

```kusto
StormEvents
| evaluate funnel_sequence(EpisodeId, StartTime, datetime(2007-01-01), datetime(2008-01-01), 1d,365d, EventType, 
dynamic(['Hail', 'Tornado', 'Thunderstorm Wind']))
```

`Table #1` 건너뛰고, `Table #2`그리고 찾고 `Table #3` - 우리는 92 이벤트의 순서가이 `Hail`  ->  `Tornado`  ->  `Thunderstorm Wind` 순서로 `Hail` 끝났다 결론을 내릴 수 있습니다, 41 이벤트에서와 같이 계속, `Tornado` 14로 다시 설정.

|StartTime|다음|카운트 (것)수|
|---------|-----|------|
|2007-01-01 00:00:00.0000000||92|
|2007-01-01 00:00:00.0000000|우박|41|
|2007-01-01 00:00:00.0000000|토네이도|14|
|2007-01-01 00:00:00.0000000|갑작스러운 홍수|11|
|2007-01-01 00:00:00.0000000|번개|2|
|2007-01-01 00:00:00.0000000|호우|1|
|2007-01-01 00:00:00.0000000|홍수|1|